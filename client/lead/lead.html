<template name="leadTeamView">
  <div class="container-fluid">
    <div class="row">
      <div class="col-md-2 bg-grey">
        <h3>{{ name }}</h3>
        <h5 class="mb-2 dark-text">{{__ "leads"}}</h5>
        <ul>
          {{#each lead in allLeads}}
            <li>{{getUserName lead.userId}}</li>
          {{/each}}
        </ul>
        <h5 class="mb-2 dark-text">{{__ "information"}}</h5>
        <ul>
          <li>
            <div data-toggle="tooltip" data-placement="top" title="{{__ "wanted_covered_confirmed"}}">
              {{__ "shifts"}}: {{shiftRate.needed}}/{{shiftRate.confirmed}}
            </div>
          </li>
          <li>
            <div data-toggle="tooltip" data-placement="top" title="{{__ "total_number_of_volunteers"}}">
              {{__ "volunteers"}}: {{volunteerNumber}}
            </div>
          </li>
          <li>
            <div data-toggle="tooltip" data-placement="top" title="{{__ "total_number_of_volunteers"}}">
              {{__ "pending_requests"}}: {{pendingRequests}}
            </div>
          </li>
        </ul>
        <button type="button" class="btn btn-default btn-sm" data-action="team_settings">
          {{fa "wrench"}} {{__ "team_settings"}}
        </button>
        <button type="button" class="btn btn-default btn-sm" data-id="{{_id}}" data-action="add_shift">
          {{fa "wrench"}} {{__ "add_shift"}}
        </button>
        <button type="button" class="btn btn-default btn-sm" data-id="{{_id}}" data-action="add_shift_group">
          {{fa "wrench"}} {{__ "add_rota"}}
        </button>
        <!-- <button type="button" class="btn btn-default btn-sm" data-id="{{_id}}" data-action="add_task">
          {{fa "wrench"}} {{__ "add_task"}}
        </button> -->
        <button type="button" class="btn btn-default btn-sm" data-id="{{_id}}" data-action="add_project">
          {{fa "wrench"}} {{__ "add_project"}}
        </button>
      </div>
      <div class="{{#if $gt pendingRequests 0}}col-sm-12 col-md-5 pr-1{{else}}col-sm-6 col-md-10{{/if}} pl-1 user-top">
        {{> leadTeamTabs }}
      </div>
      {{#if $gt pendingRequests 0}}
        <div class="col-sm-12 col-md-5 pl-1 user-top">
          <h2 class="header">{{__ "applications" }}</h2>
          {{> teamSignupsList }}
        </div>
      {{/if}}
    </div>
  </div>
</template>

<template name="leadTeamTabs">
  <ul class="nav nav-tabs" role="tablist">
    <li class="nav-item">
      <a class="nav-link active" href="#shifts" role="tab" data-toggle="tab">
        <span>{{__ "all_shifts"}}</span>
      </a>
    </li>
    <li class="nav-item">
      <a class="nav-link" href="#projects" role="tab" data-toggle="tab">
        <span>{{__ "all_projects"}}</span>
      </a>
    </li>
  </ul>

  <!-- Shifts -->
  <div class="tab-content">
    <div role="tabpanel" class="tab-pane active" id="shifts">
      <div class="pt-2">
        {{> weekstrip day=currentDay shownDay=shownDay callback=updateCurrentDay }}
        {{# teamShiftsTable _id=_id date=currentDay }}
          {{> shiftSignupEnrollAction }}
        {{/teamShiftsTable}}
      </div>
    </div>
    <!-- Projects -->
    <div role="tabpanel" class="tab-pane fade" id="projects">
      {{> teamProjectsTable _id=_id }}
    </div>
  </div>
</template>

<template name="shiftSignupEnrollAction">
  <button class="btn btn-sm btn-circle" href="#" data-action="enroll"
    data-id="{{shift._id}}" data-team="{{shift.parentId}}" data-type="shift"
    data-policy="{{shift.policy}}" > {{fa "user-plus"}} </button>
</template>
