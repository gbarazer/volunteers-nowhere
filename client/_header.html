<template name="_header">
  <nav id="mainNav" class="navbar navbar-default navbar-fixed-top navbar-custom">
    <div class="container">
      <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
              <span class="sr-only">Toggle navigation</span> Menu <i class="fa fa-bars"></i>
          </button>
          <a class="navbar-brand" href="{{pathFor 'homePage'}}"><i class="fa fa-home"></i></a>
          <a class="navbar-brand" href="{{#unless currentUser}}{{pathFor 'homePage'}}{{else}}{{pathFor 'dashboard'}}{{/unless}}">Volunteers @ Nowhere</a>
      </div>

      <div class="collapse navbar-collapse" id="navbarResponsive">
        <ul class="nav navbar-nav navbar-right">
          <li class="nav-item">
            <a class="nav-link rounded" href="{{pathFor 'signups'}}">Signups</a>
          </li>
          <!-- <li class="nav-item">
            <a class="nav-link rounded" href="{{pathFor 'organization'}}">NOrg</a>
          </li> -->
          {{#if currentUser}}
            {{#if isManager }}
              <li class="dropdown">
                <a href="#" class="dropdown-toggle"
                  data-toggle="dropdown" role="button"
                  aria-haspopup="true" aria-expanded="false">Manager <span class="caret"></span></a>
                <ul class="dropdown-menu">
                  <li class="{{isActiveRoute 'managerView'}}">
                    <a href="{{pathFor 'managerView'}}">Dashboard</a>
                  </li>
                  <li class="{{isActiveRoute 'allUsersList'}}">
                    <a href="{{pathFor 'allUsersList'}}">All Users</a>
                  </li>
                  <li class="{{isActiveRoute 'managerUserForm'}}">
                    <a href="{{pathFor 'managerUserForm'}}">Profile Form</a>
                  </li>
                </ul>
              </li>
            {{/if}}
            {{#if isNoInfo }}
              <li class="dropdown">
                <a href="#" class="dropdown-toggle"
                  data-toggle="dropdown" role="button"
                  aria-haspopup="true" aria-expanded="false">NoInfo <span class="caret"></span></a>
                <ul class="dropdown-menu">
                  <li class="{{isActiveRoute 'noInfoDashboard'}}">
                    <a href="{{pathFor 'noInfoDashboard'}}">Dashboard</a>
                  </li>
                  <li class="{{isActiveRoute 'noInfoNewUser'}}">
                    <a href="{{pathFor 'noInfoNewUser'}}">New User</a>
                  </li>
                  <li class="{{isActiveRoute 'noInfoAllUsers'}}">
                    <a href="{{pathFor 'noInfoAllUsers'}}">All Users</a>
                  </li>
                </ul>
              </li>
            {{/if}}
            {{#if isManagerOrLead }}
              <li class="dropdown">
                <a href="#" class="dropdown-toggle"
                  data-toggle="dropdown" role="button"
                  aria-haspopup="true" aria-expanded="false">MetaLead <span class="caret"></span></a>
                <ul class="dropdown-menu">
                  {{#each dept in departments }}
                    <li class="nav-item">
                      <a href="{{pathFor 'metaleadDepartmentView' _id=dept._id }}" >{{dept.name}}</a>
                    </li>
                  {{/each}}
                </ul>
              </li>
            {{/if}}
            {{#if isManagerOrLead }}
              <li class="dropdown">
                <a href="#" class="dropdown-toggle"
                  data-toggle="dropdown" role="button"
                  aria-haspopup="true" aria-expanded="false">Lead <span class="caret"></span></a>
                <ul class="dropdown-menu">
                  {{#each team in teams }}
                    <li class="nav-item">
                      <a href="{{pathFor 'leadTeamView' _id=team._id }}" >{{team.name}}</a>
                    </li>
                  {{/each}}
                </ul>
              </li>
            {{/if}}
            <li class="dropdown">
              <a href="#" class="dropdown-toggle"
                data-toggle="dropdown" role="button"
                aria-haspopup="true" aria-expanded="false">Welcome {{firstName}}<span class="caret"></span></a>
              <ul class="dropdown-menu">
          		  <li class="{{isActiveRoute 'userProfileEdit'}}">
                  <a href="{{pathFor 'userProfileEdit'}}">Edit profile</a>
                </li>
          		  <li class="{{isActiveRoute 'atChangePwd'}}">
                  <a href="{{pathFor 'atChangePwd'}}">Change Password</a>
                </li>
                <li class="{{isActiveRoute 'accountSettings'}}">
                  <a href="{{pathFor 'accountSettings'}}">Account Settings</a>
                </li>
                {{#if isImpersonating}}
                  <li><a data-action="unimpersonate">{{_ "Click to unimpersonate"}}</a></li>
                {{/if}}
                <li class="{{isActiveRoute 'atSignOut'}}">
                  <a href="{{pathFor 'atSignOut'}}">Logout</a>
                </li>
              </ul>
            </li>
          {{else}}
      		  {{> atNavButton}}
          {{/if}}
        </ul>
      </div>
    </div>
  </nav>
</template>
