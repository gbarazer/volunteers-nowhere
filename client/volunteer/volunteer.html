<template name="userDashboard">
{{#if Template.subscriptionsReady }}
  <div class="container-fluid">
    <div class="row">
      <div class="col-sm-6 col-md-2 pr-1 bg-grey user-top">
        {{#if currentUser.profile.picture}}
          <h3>{{__ "welcome"}} {{ getUserName userId }}</h3>
          <img src="{{imageFileLink currentUser.profile.picture}}" class="rounded-circle header-avatar">
        {{else}}
          <h3>{{__ "welcome"}} Nobody</h3>
          <img src="img/mr_nobody.jpg" class="rounded-circle header-avatar">
          <a href="{{pathFor 'accountSettings'}}">{{__ "add_picture"}}</a>
        {{/if}}
        <h5 class="mb-2 dark-text">{{__ "responsabilities"}} </h5>
        <ul class="list-unstyled">
          {{#if isManager }}<li><span class="mb-2 dark-text">{{__ "role"}}: </span>Manager</li>{{/if}}
          {{#if isNoInfo }}<li><span class="mb-2 dark-text">{{__ "noInfo"}}: </span>Member</li>{{/if}}
          {{#each team in leads}}
            <li>
              <span class="mb-2 dark-text">{{__ "lead"}}:</span>
              <a href="{{pathFor 'leadTeamView' _id=team._id }}">{{team.name}}</a>
            </li>
          {{/each}}
          {{#each dept in metaleads}}
            <li>
              <span class="mb-2 dark-text">{{__ "metalead"}}: </span>
              <a href="{{pathFor 'metaleadDepartmentView' _id=dept._id }}">{{dept.name}}</a>
            </li>
          {{/each}}
        </ul>
        <br/>
        <button type="button" class="btn btn-default btn-sm" data-action="edit_form">
          {{__ "edit_user_info" }}
        </button>
      </div>
      {{#if bookedMissions }}
        <div class="col-md-5 pl-1 pr-1 user-top">
          <h2 class="header">{{__ "booked_missions" }}</h2>
          {{> bookedTable }}
        </div>
        <div class="col-md-5 pl-1 user-top">
          <h2 class="header">{{__ "shift_need_help"}}</h2>
          {{> signupsListTabs bookedMissions="true" }}
        </div>
      {{else}}
        <div class="col-sm-6 col-md-10 pl-1 user-top">
          {{> signupsListTabs }}
        </div>
      {{/if}}
    </div>
  </div>
{{/if}}
</template>

<template name="signupsListTabs">
  <ul class="nav nav-tabs" role="tablist">
    <li class="nav-item">
      <a class="nav-link active" href="#specials" role="tab" data-toggle="tab">
        <span class="text-danger">{{fa "fire"}} {{__ "specials_of_the_day"}} {{fa "fire"}}</span>
      </a>
    </li>
    <li class="nav-item">
      <a class="nav-link" href="#menus" role="tab" data-toggle="tab">
        <span class="text-warning">{{fa "bars"}} {{__ "menus"}}</span>
      </a>
    </li>
    <li class="nav-item">
      <a class="nav-link" href="#alacarte" role="tab" data-toggle="tab">
        <span class="text-info">{{fa "globe"}} {{__ "alacarte"}}</span>
    </a>
    </li>
  </ul>
  <!-- Specials -->
  <div class="tab-content">
    <div role="tabpanel" class="tab-pane active" id="specials">
      <div class="container-fluid">
        <div class="row sub-user-top">
          <div class="{{#if bookedMissions}}col-md-12{{else}}col pr-1{{/if}}">
            <h2 class="header">{{__ "important_shifts"}}</h2>
            {{> signupsList searchQuery=(searchQuerySpecials 'shift') }}
          </div>
          <div class="{{#if bookedMissions}}col-md-12{{else}}col pl-1{{/if}}">
            <h2 class="header">{{__ "lead_positions"}}</h2>
            {{> signupsList searchQuery=(searchQuerySpecials 'lead') }}
          </div>
        </div>
      </div>
    </div>
    <!-- Menus -->
    <div role="tabpanel" class="tab-pane fade" id="menus">
      <div class="container-fluid">
        <div class="row sub-user-top">
          {{#each team in teamSelection }}
            <div class="{{#if bookedMissions}}col-md-12{{else}}col-md-6 pr-1{{/if}}">
              <h2 class="header">{{ team.name }}</h2>
              {{> signupsList searchQuery=(searchQueryMenus team._id) }}
            </div>
          {{/each}}
        </div>
      </div>
    </div>
    <!-- A la Carte -->
    <div role="tabpanel" class="tab-pane fade" id="alacarte">
      {{> signupsList searchQuery=searchQueryAlaCarte }}
    </div>
  </div>
</template>

<template name="volunteerForm">
  <div class="container">
    <h2>{{__ "volunteer_form"}}</h2>
    {{> addVolunteerForm }}
  </div>
</template>

<template name="accountSettings">
  <div class="container">
    <h2>{{__ "user_details"}}</h2>
    {{> userProfile }}
  </div>
</template>

<!-- <template name="volunteerFormDisplay">
  <div class="container">
    <div class="card">
      <div class="card-header"><h3 class="card-title">{{__ "volunteer_profile"}}</h3></div>
      <img src="{{imageFileLink user.profile.picture}}" class="rounded-circle header-avatar">
      <div class="card-text">
        <ul class="list-unstyled">
          <li>
            <strong>{{__ "full_name"}}</strong>: {{ getUserName user._id }}
            {{#if user.verified}}<span class="text-success">{{fa "check"}}</span>{{/if}}
          </li>
          <li><strong>{{__ "last_login"}}</strong>: {{formatDateTime user.lastLogin}}</li>
        </ul>
      </div>
      <div class="card-body">
        {{> formBuilderDisplay }}
      </div>
    </div>
  </div>
</template> -->

<!-- shifts & task the user has signed up for -->
<template name="filterstest">
    <h3>{total nb of shifts+tasks} Missions</h3>
    <li class="dropdown">
      <a href="#" class="dropdown-toggle"
        data-toggle="dropdown" role="button"
        aria-haspopup="true" aria-expanded="false">
        <p class="button">Filter shifts<span class="caret"></span></p>
      </a>
      <ul class="dropdown-menu">
        <li class="{{isActiveRoute 'managerView'}}">
          <a href="{{pathFor 'managerView'}}">each Team names</a>
        </li>
        <li class="{{isActiveRoute 'allUsersList'}}">
          <a href="{{pathFor 'allUsersList'}}">each Day</a>
        </li>
        <li class="{{isActiveRoute 'allUsersList'}}">
          <a href="{{pathFor 'allUsersList'}}">Tasks</a>
        </li>
        <li class="{{isActiveRoute 'allUsersList'}}">
          <a href="{{pathFor 'allUsersList'}}">Shifts</a>
        </li>
      </ul>
    </li>

    Shifts + tasks
    separators
</template>

<!-- the shifts & tasks that could fit to the user -->
<template name="matchItems">
    identical to the list on top, exept with different content
</template>
