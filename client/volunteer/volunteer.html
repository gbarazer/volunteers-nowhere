<template name="userDashboard">
{{#if Template.subscriptionsReady }}
  <div class="container-fluid">
    <div class="row">
      <div class="col-sm-12 col-md-2 pr-1 bg-grey">
        {{#if currentUser.profile.picture}}
          <h3>{{__ "welcome"}} {{ getUserName userId }}</h3>
          <img src="{{imageFileLink currentUser.profile.picture}}" class="rounded-circle header-avatar">
        {{else}}
          <h3>{{__ "welcome"}} Nobody</h3>
          <img src="img/mr_nobody.jpg" class="rounded-circle header-avatar">
          <a href="{{pathFor 'accountSettings'}}">{{__ "add_picture"}}</a>
        {{/if}}
        <h5 class="mb-2 dark-text">{{__ "responsabilities"}} </h5>
        <ul class="list-unstyled">
          {{#if isManager }}<li><span class="mb-2 dark-text">{{__ "role"}}: </span>Manager</li>{{/if}}
          {{#if isNoInfo }}<li><span class="mb-2 dark-text">{{__ "noInfo"}}: </span>Member</li>{{/if}}
          {{#each team in leads}}
            <li>
              <span class="mb-2 dark-text">{{__ "lead"}}:</span>
              <a href="{{pathFor 'leadTeamView' _id=team._id }}">{{team.name}}</a>
            </li>
          {{/each}}
          {{#each dept in metaleads}}
            <li>
              <span class="mb-2 dark-text">{{__ "metalead"}}: </span>
              <a href="{{pathFor 'metaleadDepartmentView' _id=dept._id }}">{{dept.name}}</a>
            </li>
          {{/each}}
        </ul>
        <br/>
        <button type="button" class="btn btn-default btn-sm" data-action="edit_form">
          {{__ "edit_user_info" }}
        </button>
      </div>
      {{#if bookedMissions }}
        <div class="col-sm-12 col-md-5 pl-1 pr-1">
          <h2 class="header">{{__ "booked_missions" }}</h2>
          {{> bookedTable }}
        </div>
        <div class="col-sm-12 col-md-5 pl-1">
          <h2 class="header">{{__ "shift_need_help"}}</h2>
          {{> filteredSignupsList }}
        </div>
      {{else}}
        <div class="col-sm-6 col-md-10 pl-1">
          {{> filteredSignupsList }}
        </div>
      {{/if}}
    </div>
  </div>
{{/if}}
</template>

<template name="filteredSignupsList">
  <select id='typeSelect' class="selectpicker">
      <option value="event">{{__ "event_shifts"}}</option>
      <option value="project">{{__ "build_strike"}}</option>
      <option value="lead">{{__ "lead_positions"}}</option>
  </select>
  <select
    id='skillSelect'
    class="selectpicker"
    data-none-selected-text="{{__ 'filter_by_skill'}}"
    data-count-selected-text="{{__ 'filter_selected_skill'}} {0}/{1}"
    data-selected-text-format="count > 2"
    data-actions-box="true"
    multiple
  >
    {{#each skill in skills}}
      <option value="{{skill.value}}">{{ skill.label }}</option>
    {{/each}}
  </select>
  <select
    id='quirkSelect'
    class="selectpicker"
    data-none-selected-text="{{__ 'filter_by_quirk'}}"
    data-count-selected-text="{{__ 'filter_selected_quirk'}} {0}/{1}"
    data-selected-text-format="count > 2"
    data-actions-box="true"
    multiple
  >
    {{#each quirk in quirks}}
      <option value="{{quirk.value}}">{{ quirk.label }}</option>
    {{/each}}
  </select>
  <select
    id='prioritySelect'
    class="selectpicker"
    data-none-selected-text="{{__ 'filter_by_priority'}}"
    data-count-selected-text="{{__ 'filter_selected_priority'}} {0}/{1}"
    data-selected-text-format="count > 2"
    multiple
  >
    <option value="essential">{{__ 'essential'}}</option>
    <option value="important">{{__ 'important'}}</option>
    <option value="normal">{{__ 'normal'}}</option>
  </select>
  {{> signupsList signupsListProps }}
</template>

<template name="volunteerForm">
  <div class="container">
    <h2>{{__ "volunteer_form"}}</h2>
    {{> addVolunteerForm }}
  </div>
</template>

<template name="accountSettings">
  <div class="container">
    <h2>{{__ "user_details"}}</h2>
    {{> userProfile }}
  </div>
</template>

<!-- <template name="volunteerFormDisplay">
  <div class="container">
    <div class="card">
      <div class="card-header"><h3 class="card-title">{{__ "volunteer_profile"}}</h3></div>
      <img src="{{imageFileLink user.profile.picture}}" class="rounded-circle header-avatar">
      <div class="card-text">
        <ul class="list-unstyled">
          <li>
            <strong>{{__ "full_name"}}</strong>: {{ getUserName user._id }}
            {{#if user.verified}}<span class="text-success">{{fa "check"}}</span>{{/if}}
          </li>
          <li><strong>{{__ "last_login"}}</strong>: {{formatDateTime user.lastLogin}}</li>
        </ul>
      </div>
      <div class="card-body">
        {{> formBuilderDisplay }}
      </div>
    </div>
  </div>
</template> -->

<!-- shifts & task the user has signed up for -->
<template name="filterstest">
    <h3>{total nb of shifts+tasks} Missions</h3>
    <li class="dropdown">
      <a href="#" class="dropdown-toggle"
        data-toggle="dropdown" role="button"
        aria-haspopup="true" aria-expanded="false">
        <p class="button">Filter shifts<span class="caret"></span></p>
      </a>
      <ul class="dropdown-menu">
        <li class="{{isActiveRoute 'managerView'}}">
          <a href="{{pathFor 'managerView'}}">each Team names</a>
        </li>
        <li class="{{isActiveRoute 'allUsersList'}}">
          <a href="{{pathFor 'allUsersList'}}">each Day</a>
        </li>
        <li class="{{isActiveRoute 'allUsersList'}}">
          <a href="{{pathFor 'allUsersList'}}">Tasks</a>
        </li>
        <li class="{{isActiveRoute 'allUsersList'}}">
          <a href="{{pathFor 'allUsersList'}}">Shifts</a>
        </li>
      </ul>
    </li>

    Shifts + tasks
    separators
</template>

<!-- the shifts & tasks that could fit to the user -->
<template name="matchItems">
    identical to the list on top, exept with different content
</template>
